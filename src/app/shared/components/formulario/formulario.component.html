<form class="formulario-container" #formCadastro="ngForm" (ngSubmit)="submit()">
  <h2>Dados Pessoais</h2>
  
  <div class="input-container">
    <nz-input-group [nzPrefix]="userIcon">
      <input 
        name="nome" 
        type="text" 
        nz-input 
        placeholder="Nome Completo" 
        [(ngModel)]="cliente.nome"
      />
    </nz-input-group>

    <ng-template #userIcon>
      <nz-icon nzType="user" nzTheme="outline" />
    </ng-template>
  </div>

  <div class="input-container">
    <nz-input-group [nzPrefix]="mailIcon">
      <input 
        name="email" 
        type="email" 
        nz-input placeholder="E-mail" 
        [(ngModel)]="cliente.email"
      />
    </nz-input-group>

    <ng-template #mailIcon>
      <nz-icon nzType="mail" nzTheme="outline" />
    </ng-template>
  </div>

  <div class="input-container">
    <nz-input-group [nzPrefix]="cpfIcon">
      <input 
        name="cpf" 
        type="text" 
        nz-input 
        placeholder="CPF" 
        [(ngModel)]="cliente.cpf"
      />
    </nz-input-group>

    <ng-template #cpfIcon>
      <nz-icon nzType="idcard" nzTheme="outline" />
    </ng-template>
  </div>

  <div class="input-container date">
    <nz-input-group [nzPrefix]="dateIcon">
      <input 
        name="dataNascimento" 
        type="text" 
        nz-input placeholder="Data de Nascimento" 
        [(ngModel)]="cliente.dataNascimento"
      />
    </nz-input-group>

    <ng-template #dateIcon>
      <nz-icon nzType="calendar" nzTheme="outline" />
    </ng-template>
  </div>

  <div class="input-container location">
    <nz-input-group [nzPrefix]="locationIcon">      
      <nz-select 
        name="estado" 
        ngModel="lucy" 
        nzSize="large" 
        nzPlaceHolder="UF"
        [(ngModel)]="cliente.estado"
        (ngModelChange)="listarMunicipios($event)"
      >
        @for(estado of estados; track estado.sigla) {
          <nz-option nzValue="{{ estado.sigla }}" nzLabel="{{ estado.nome }}" />
        }
      </nz-select>

      <ng-template #locationIcon>
        <nz-icon nzType="environment" nzTheme="outline" />
      </ng-template>
    </nz-input-group>
  </div>

  <div class="input-container location">
    <nz-input-group [nzPrefix]="cityIcon">      
      <nz-select 
      name="cidade" 
      ngModel="lucy" 
      nzSize="large" 
      nzPlaceHolder="MunicÃ­pio"
      [(ngModel)]="cliente.cidade"
      nzDisabled="{{ !cliente.estado }}"
      >
        @for(municipio of municipios; track municipio.codigo_ibge) {
          <nz-option nzValue="{{ municipio.nome }}" nzLabel="{{ municipio.nome }}" />
        }
      </nz-select>

      <ng-template #cityIcon>
        <nz-icon nzType="verified" nzTheme="outline" />
      </ng-template>
    </nz-input-group>
  </div>

  <div class="action-section">
    @if(atualizandoCliente) {
      <button type="submit" nz-button nzType="primary" nzSize="large">Atualizar</button>
    } @else {
      <button type="submit" nz-button nzType="primary" nzSize="large">Salvar</button>
    }
    <button nz-button nzType="primary" nzSize="large" nzDanger>Limpar</button>
  </div>
</form>